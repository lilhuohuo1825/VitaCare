<!-- Reviews Component - Quản lý đánh giá -->
<div class="reviews-wrapper">
    <div class="reviews-header">
        <h2 class="reviews-title">QUẢN LÝ ĐÁNH GIÁ</h2>
        <div class="search-box">
            <img src="assets/icon/search.png" alt="Search" class="search-icon">
            <input type="text" placeholder="Tìm kiếm đơn hàng của bạn" class="search-input">
        </div>
    </div>

    <!-- Tabs -->
    <div class="reviews-tabs">
        <button class="tab-btn" [class.active]="activeTab === 'pending'" (click)="setActiveTab('pending')">
            Chưa đánh giá
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'completed'" (click)="setActiveTab('completed')">
            Đã đánh giá
        </button>
    </div>

    <!-- Filter Bar -->
    <div class="filter-bar">
        <span class="filter-label">Đã giao hàng</span>
        <span class="filter-label">Ngày đặt</span>
        <span class="filter-label">n sản phẩm (số lượng)</span>
        <span class="filter-label">Mã đơn đặt hàng</span>
    </div>

    <!-- Reviews List -->
    <div class="reviews-list">
        <div class="review-card" *ngFor="let review of filteredReviews">
            <div class="review-header">
                <span class="review-status">{{ review.statusText }}</span>
                <div class="review-meta">
                    <span class="review-date">{{ review.date }}</span>
                    <span class="review-id">#{{ review.orderId }}</span>
                </div>
            </div>

            <div class="review-items">
                <div class="review-item" *ngFor="let item of review.items">
                    <div class="item-image">
                        <img [src]="item.image" [alt]="item.name" onerror="this.src='assets/icon/no-order.png'">
                    </div>
                    <div class="item-details">
                        <h4 class="item-name">{{ item.name }}</h4>
                        <p class="item-desc">{{ item.description }}</p>
                        <p class="item-price">{{ item.price | number:'1.0-0' }} ₫/viên</p>
                    </div>
                    <div class="item-summary">
                        <p class="item-quantity">Số lượng: {{ item.quantity }}</p>
                        <p class="item-total">Giá tổng</p>
                    </div>
                </div>
            </div>

            <div class="review-footer">
                <button class="btn-expand" (click)="toggleReviewDetails(review.id)">
                    Thu gọn
                    <img src="assets/icon/arrowup_circle.png" alt="collapse" class="icon-sm">
                </button>
                <div class="review-total">
                    <span class="total-label">Tổng số tiền:</span>
                    <span class="total-amount">{{ review.total | number:'1.0-0' }} ₫</span>
                </div>
                <button class="btn-secondary" *ngIf="activeTab === 'pending'" (click)="buyAgain(review.orderId)">
                    Mua lại
                </button>
                <button class="btn-primary" *ngIf="activeTab === 'pending'" (click)="writeReview(review.id)">
                    Đánh giá
                </button>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="filteredReviews.length === 0">
            <img src="assets/icon/no-order.png" alt="No reviews" class="empty-icon">
            <p class="empty-text">Không có đơn hàng nào cần đánh giá</p>
        </div>
    </div>
</div>